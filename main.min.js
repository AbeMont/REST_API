function removeModal(){document.querySelector(".modal__body").classList.add("remove"),setTimeout(()=>{document.querySelector(".modal").classList.remove("active"),document.querySelector(".modal__body").classList.remove("remove")},300);let modalUl=Array.from(document.querySelectorAll(".modal ul")),ulEl=document.querySelector(".modal ul"),modalChildren=Array.from(modalUl[0].children);for(let i=0;i<modalChildren.length;i++)ulEl.removeChild(modalChildren[i])}function modalInfo(linksArr){let array=linksArr;for(let i=0;i<linksArr.length;i++)linksArr[i].addEventListener("click",()=>{let anchorName=linksArr[i].dataset.openModal,http=new XMLHttpRequest;http.onreadystatechange=(()=>{if(200===http.status&&4===http.readyState){let data;JSON.parse(http.responseText).forEach(person=>{if(person.name===anchorName){console.log(person);let modal=document.querySelector(".modal"),modalTitle=document.querySelector(".modal h1"),modalImg=document.querySelector(".modal img"),modalUl=document.querySelector(".modal ul"),contactInfo={email:person.email,address:person.address,phoneNumber:person.phone,website:person.website};modalImg.src=person.profilePic,modalTitle.textContent=person.name,modal.classList.add("active");for(let prop in contactInfo){let li=document.createElement("li"),liInfo=modalUl.appendChild(li);"address"===prop?(console.log(person.address),liInfo.textContent=`${person.address.street} .St, ${person.address.suite} ${person.address.city}, ${person.address.zipcode}`):liInfo.textContent=contactInfo[prop]}}})}}),http.open("GET","./users.json",!0),http.send()})}function createHtml(data,name,value){this.value=value,console.log(data);let section=document.createElement("section"),anchor=document.createElement("a"),anchorInfo=document.createElement("a"),span=document.createElement("span"),img=document.createElement("img"),divName=document.createElement("div"),divInfo=document.createElement("div"),h3=document.createElement("h3"),ul=document.createElement("ul"),randomId=(9999*Math.random()).toFixed(),currentSection=document.querySelector(".show-info-"+this.value).appendChild(section);currentSection.id=randomId,currentSection.classList.add("data-section"),currentSection.dataset.section=`${data.name} ${this.value}`;let nameSection=currentSection.appendChild(divName);nameSection.classList.add("data-section__name");let infoSection=currentSection.appendChild(divInfo);infoSection.classList.add("data-section__info");let sectionAnchor=nameSection.appendChild(anchor);anchor.textContent="X",anchor.href="javascript:void(0)",anchor.classList.add("close"),nameSection.appendChild(h3).textContent=data.name,nameSection.appendChild(img).src=data.profilePic;let infoUl=infoSection.appendChild(ul),companyInfo;[{Username:data.username},{Company:data.company.name},{Occupation:data.company.occupation}].forEach(listItem=>{let li=document.createElement("li"),b=document.createElement("b"),span=document.createElement("span"),generatedLi=infoUl.appendChild(li);for(let prop in listItem){let boldDesc;generatedLi.appendChild(b).textContent=prop+": ";let value=generatedLi.appendChild(span);value.classList.add("light"),value.textContent=listItem[prop]}});let contactAnchor=infoSection.appendChild(anchorInfo);contactAnchor.href="javascript:void(0)",contactAnchor.dataset.openModal=data.name,contactAnchor.textContent="View Contant Info",console.log(currentSection),getSections(),modalInfo(currentSection,data)}function getSections(){sections=Array.from(document.querySelectorAll("[data-section]")),removeSections(sections)}function removeSections(allSections){allSections.forEach(section=>{section.children[0].addEventListener("click",()=>{section.classList.add("remove"),setTimeout(()=>{section.remove()},300)})})}console.log("Data Rest API"),document.querySelector("#firstname").addEventListener("click",function(){let name=document.getElementById("name-person").value.toLowerCase(),sections=void 0;if(console.log(name),""===name)return alert("Please enter a Name."),!1;{let request=new XMLHttpRequest,personFound=!1;request.onreadystatechange=function(){if(console.log(request),200===request.status&&4===request.readyState){var response=JSON.parse(request.responseText);console.log(response),console.log(request),response.forEach(person=>{let firstName;if(firstName="mrs."==person.name.toLowerCase().split(" ")[0]?person.name.toLowerCase().split(" ")[1]:person.name.toLowerCase().split(" ")[0],name===firstName)if(document.querySelector(`[data-section="${person.name} name"]`)){if(document.querySelector(`[data-section="${person.name} name"]`))return personFound=!0,document.getElementById("name-person").value="",!1}else createHtml(person,firstName,"name"),personFound=!0,document.getElementById("name-person").value=""});let modalLinks=Array.from(document.querySelectorAll("[data-open-modal]"));console.log(modalLinks),modalInfo(modalLinks),personFound||(alert(`No such person with the name of ${name} is found on the server`),document.getElementById("name-person").value="")}},request.open("GET","./users.json",!0),request.send()}}),document.querySelector("#company-btn").addEventListener("click",()=>{let company=document.getElementById("company-person").value.toLowerCase(),companyFound=!1;if(console.log(company),""===company)return alert("Please enter a company name."),!1;{let http=new XMLHttpRequest;http.onreadystatechange=(()=>{if(200===http.status&&4===http.readyState){let data=JSON.parse(http.responseText),modalLinks;console.log(data),data.forEach(person=>{let companyName;if(person.company.name===company){if(console.log(person),document.querySelector(`[data-section="${person.name} company"]`))return document.getElementById("company-person").value="",companyFound=!0,!1;document.querySelector(`[data-section="${person.name} company"]`)||(createHtml(person,person.name,"company"),document.getElementById("company-person").value="",companyFound=!0)}}),modalInfo(Array.from(document.querySelectorAll("[data-open-modal]"))),companyFound||(alert(`No company with the name of ${company} is found in the server.`),document.getElementById("company-person").value="")}}),http.open("GET","./users.json",!0),http.send()}}),document.getElementById("occupation-btn").addEventListener("click",()=>{let value=document.querySelector("#occupation-person").value,occupationFound=!1;if(console.log(value),""==value)return alert("Please enter an occupation"),!1;{let http=new XMLHttpRequest;http.onreadystatechange=(()=>{if(200===http.status&&4===http.readyState){let data=JSON.parse(http.responseText),modalLinks;console.log(data),data.forEach(person=>{let occupation=person.company.occupation;if(console.log(occupation),occupation!==value)return!1;console.log(person),document.querySelector(` [data-section ="${person.name} occupation"] `)?document.querySelector(` [data-section ="${person.name} occupation"] `)&&(occupationFound=!0,document.querySelector("#occupation-person").value=""):(occupationFound=!0,document.querySelector("#occupation-person").value="",createHtml(person,person.name,"occupation"))}),modalInfo(Array.from(document.querySelectorAll("[data-open-modal]"))),occupationFound||(alert("Please enter a valid Occupation."),document.querySelector("#occupation-person").value="")}}),http.open("GET","./users.json",!0),http.send()}}),document.querySelector(".modal__close").addEventListener("click",()=>{removeModal()}),window.onclick=(e=>{e.target===document.querySelector(".modal")&&removeModal()});